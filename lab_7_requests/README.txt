–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ7. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ Python

–í—ã–ø–æ–ª–Ω–∏–ª: –ì–æ–ª—É–±–µ–≤ –ê—Ä—Ç—ë–º –î–º–∏—Ç—Ä–∏–µ–≤–∏—á
–ò–°–£: 502712
–ì—Ä—É–ø–ø–∞: –†3124

–ó–∞–¥–∞–Ω–∏–µ:
–ü–æ–¥—É–º–∞–π—Ç–µ –Ω–∞–¥ –≤–æ–ø—Ä–æ—Å–æ–º –∏ –±—É–¥—å—Ç–µ –≥–æ—Ç–æ–≤—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –Ω–µ–≥–æ:
–ö–∞–∫ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –µ—Å–ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–Ω–µ—Å–µ–Ω–æ –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä?

üéØ –¶–µ–ª–∏ —Ä–∞–±–æ—Ç—ã
–æ—Å–≤–æ–∏—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏;
–Ω–∞—É—á–∏—Ç—å—Å—è —Ä–∞–∑–¥–µ–ª—è—Ç—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞) –∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤ (—Å–∫–≤–æ–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞);
–Ω–∞—É—á–∏—Ç—å—Å—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–µ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API;
–æ—Å–≤–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –ø–æ—Ç–æ–∫–æ–≤ (sys.stdout, io.StringIO, logging);
–Ω–∞—É—á–∏—Ç—å—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

1. –ó–∞–¥–∞–Ω–∏–µ
1.1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä logger, –∫–æ—Ç–æ—Ä—ã–π:
üî∑ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω:

–±—ã—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑—É–µ–º—ã–º
–°–∏–≥–Ω–∞—Ç—É—Ä–∞:

def logger(func=None, *, handle=sys.stdout):
    ...
–≤–µ—Å—Ç–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–∏–º –∏–∑ —Ç—Ä—ë—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–∞ handle):

–í–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî –æ–±—ã—á–Ω—ã–π –ø–æ—Ç–æ–∫ –≤—ã–≤–æ–¥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
@logger
def f(...):
    ...
handle = sys.stdout

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –º–µ—Ç–æ–¥–æ–º handle.write(...).

–í–∞—Ä–∏–∞–Ω—Ç 2 ‚Äî –ª—é–±–æ–π –æ–±—ä–µ–∫—Ç, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ñ–∞–π–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä:
stream = io.StringIO()
@logger(handle=stream)
def f():
    ...
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–¥—ë—Ç –≤ StringIO.

–í–∞—Ä–∏–∞–Ω—Ç 3 ‚Äî –æ–±—ä–µ–∫—Ç –º–æ–¥—É–ª—è logging
log = logging.getLogger("L1")
@logger(handle=log)
def f():
    ...
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑:

log.info(),

log.error().

‚Üí –î–µ–∫–æ—Ä–∞—Ç–æ—Ä —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ø–æ—Å–æ–± –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
–µ—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω logging.Logger ‚Äî –ª–æ–≥–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ logging, –∏–Ω–∞—á–µ ‚Äî —á–µ—Ä–µ–∑ .write().

üî∑ –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞
–ü—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å:
—É—Ä–æ–≤–µ–Ω—å INFO: —Å—Ç–∞—Ä—Ç –≤—ã–∑–æ–≤–∞ + –∞—Ä–≥—É–º–µ–Ω—Ç—ã;
—É—Ä–æ–≤–µ–Ω—å INFO: —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ + —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å:
—É—Ä–æ–≤–µ–Ω—å ERROR: —Ç–µ–∫—Å—Ç –∏ —Ç–∏–ø –∏—Å–∫–ª—é—á–µ–Ω–∏—è,
–∑–∞—Ç–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.
–ù–µ –∏–∑–º–µ–Ω—è—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—É –≤—ã–∑—ã–≤–∞–µ–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å functools.wraps).

2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é get_currencies
–§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É:

2.1. –§—É–Ω–∫—Ü–∏—è:
def get_currencies(currency_codes: list, url=..., ...) -> dict:
    ...
2.2. –ß—Ç–æ –¥–æ–ª–∂–Ω–∞ –¥–µ–ª–∞—Ç—å:
–î–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∫ API –¶–ë –†–§ (–∏–ª–∏ —Ç–µ—Å—Ç–æ–≤–æ–º—É URL).

–ò–∑–≤–ª–µ–∫–∞—Ç—å —Å–ª–æ–≤–∞—Ä—å Valute.

–í–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–ª–æ–≤–∞—Ä—å –≤–∏–¥–∞:

{"USD": 93.25, "EUR": 101.7}
2.3. –ö–æ–≥–¥–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è:
–°–∏—Ç—É–∞—Ü–∏—è	–ò—Å–∫–ª—é—á–µ–Ω–∏–µ
API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω	ConnectionError
–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON	ValueError
–ù–µ—Ç –∫–ª—é—á–∞ ‚ÄúValute‚Äù	KeyError
–í–∞–ª—é—Ç–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –¥–∞–Ω–Ω—ã—Ö	KeyError
–ö—É—Ä—Å –≤–∞–ª—é—Ç—ã –∏–º–µ–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø	TypeError
–§—É–Ω–∫—Ü–∏—è –Ω–µ –¥–æ–ª–∂–Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å ‚Äî —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è.
–í—Å—ë –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º.

3. –û–±–µ—Ä–Ω—É—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º
@logger(handle=sys.stdout)     # –∏–ª–∏ @logger(), –∏–ª–∏ @logger(handle=logging_obj)
def get_currencies(...):
    ...
4. –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
—Å–æ–∑–¥–∞—Ç—å –ª–æ–≥–≥–µ—Ä logging.getLogger("currency");
–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª;
–ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç handle=:

file_logger = logging.getLogger("currency_file")
@logger(handle=file_logger)
def get_currencies(...):
    ...
5. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä (—Å–º. –∫–æ–ª–∞–± –≤ —Ç–µ–º–µ –∫—É—Ä—Å–∞)
–°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é solve_quadratic(a, b, c) –∏ –æ–±–µ—Ä–Ω—É—Ç—å –µ—ë –≤ –ª–æ–≥–∏—Ä—É—é—â–∏–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä.

–ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å:
INFO –¥–ª—è –¥–≤—É—Ö –∫–æ—Ä–Ω–µ–π,
WARNING –¥–ª—è –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞–Ω—Ç–∞ < 0,
ERROR –¥–ª—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (a = "abc"),
CRITICAL –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ a=b=0).

6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
6.1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ get_currencies
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å unittest:

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤;
–ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –≤–∞–ª—é—Ç–µ;
–≤—ã–±—Ä–æ—Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π:
ConnectionError,
ValueError,
KeyError.

–° –ø–æ–º–æ—â—å—é:

with self.assertRaises(ConnectionError):
    get_currencies(...)
6.2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ (–ª–æ–≥–≥–µ—Ä–∞)
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å io.StringIO():

–ü—Ä–∏–º–µ—Ä –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏:
self.stream = io.StringIO()

@logger(handle=self.stream)
def test_function(x):
    return x * 2
–ü—Ä–æ–≤–µ—Ä–∫–∏:
1. –õ–æ–≥–∏ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏
—Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Å—Ç–∞—Ä—Ç–µ (INFO)
—Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ–∫–æ–Ω—á–∞–Ω–∏–∏ (INFO)
–∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∞–Ω—ã.

2. –õ–æ–≥–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
–≤—ã–∑–≤–∞—Ç—å –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å –æ—à–∏–±–∫–æ–π;
–ø—Ä–æ–≤–µ—Ä–∏—Ç—å self.assertRegex(self.stream.getvalue(), "ERROR");
–ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–±—Ä–æ—à–µ–Ω–æ.

6.3. –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (–∏–∑ –∑–∞–¥–∞–Ω–∏—è)
class TestStreamWrite(unittest.TestCase):

    def setUp(self):
        self.stream = io.StringIO()

        @logger(handle=self.stream)
        def wrapped():
            return get_currencies(['USD'], url="https://invalid")

        self.wrapped = wrapped

    def test_logging_error(self):
        with self.assertRaises(ConnectionError):
            self.wrapped()

        logs = self.stream.getvalue()
        self.assertIn("ERROR", logs)
        self.assertIn("ConnectionError", logs)
üìÑ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –æ—Ç—á—ë—Ç–µ
–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ get_currencies (–±–µ–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è).
–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä (–∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ).
–°–∫—Ä–∏–Ω—à–æ—Ç—ã / —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –ª–æ–≥–æ–≤.

–¢–µ—Å—Ç—ã:
—Ç–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏,
—Ç–µ—Å—Ç—ã –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞,
—Ç–µ—Å—Ç—ã —Ä–∞–±–æ—Ç—ã —Å StringIO.

–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –∫–æ–¥—É get_currencies, trace
–í –∫–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –¥–æ–ª–∂–Ω–æ –ø–æ–¥–Ω–∏–º–∞—Ç—å—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
–§—É–Ω–∫—Ü–∏—è get_currencies —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å–µ—Ç—å—é –∏ –≤–Ω–µ—à–Ω–∏–º API. –í –Ω–µ–π –≤–∞–∂–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å 2 –≤–∏–¥–∞ —Å–∏—Ç—É–∞—Ü–∏–π:

1. –°–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ—Ç–æ–∫ handle –∏ –∑–∞—Ç–µ–º –ø–æ–¥–Ω—è—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ RequestException
1) API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

–ü—Ä–∏—á–∏–Ω—ã:

–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL ("https://" –∏–ª–∏ "");
—Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç;
DNS-–æ—à–∏–±–∫–∞;
—Ç–∞–π–º–∞—É—Ç;
–æ–±—Ä—ã–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
requests.get() –≤ —ç—Ç–∏—Ö —Å–ª—É—á–∞—è—Ö –ø–æ–¥–Ω–∏–º–µ—Ç:

requests.exceptions.ConnectionError
requests.exceptions.Timeout
requests.exceptions.InvalidURL
requests.exceptions.RequestException
–í–∞—à –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –ø–æ–π–º–∞—Ç—å –∏—Ö –≤ –æ–±—â–µ–º except:

except requests.exceptions.RequestException as e:
    handle.write(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ API: {e}")
    raise requests.exceptions.RequestException("–£–ø–∞–ª–∏ —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º")

–í—ã –ø–µ—á–∞—Ç–∞–µ—Ç–µ –æ—à–∏–±–∫—É –≤ handle, –∑–∞—Ç–µ–º –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç–µ –Ω–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

2. –°–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥–Ω–∏–º–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ

–ï—Å—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç raise, –∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –≤ —Ä–∞–º–∫–∞—Ö –ª–æ–≥–∏–∫–∏:

1) –ö–æ–¥ –≤–∞–ª—é—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ JSON

–ù–∞–ø—Ä–∏–º–µ—Ä:

get_currencies(["XYZ"])

–í JSON –Ω–µ—Ç "XYZ", –∑–Ω–∞—á–∏—Ç: "XYZ": "–ö–æ–¥ –≤–∞–ª—é—Ç—ã 'XYZ' –Ω–µ –Ω–∞–π–¥–µ–Ω."

–ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥–Ω–∏–º–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

2) JSON —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –Ω–æ –∑–∞–ø—Ä–æ—Å –ø—Ä–æ—à—ë–ª

API –≤–µ—Ä–Ω—É–ª HTTP 200, –Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å:

{"SomethingElse": {...}}

–í —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–µ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ—Å—Ç–æ –Ω–µ –Ω–∞–π–¥—ë—Ç "Valute" ‚Äî —ç—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥–Ω–∏–º–∞—Ç—å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

–ö–∞–∫ –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–µ trace –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫—É–¥–∞ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å?
–í–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ inner –≤–∞–º –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å:

–ø–µ—Ä–µ–¥–∞–ª–∏ –æ–±—ã—á–Ω—ã–π –ø–æ—Ç–æ–∫ (sys.stdout, io.StringIO)
–∏–ª–∏ –ø–µ—Ä–µ–¥–∞–ª–∏ –ª–æ–≥–≥–µ—Ä (logging.Logger)
–ö–ª—é—á–µ–≤–∞—è —Ä–∞–∑–Ω–∏—Ü–∞:

‚úî –ü–æ—Ç–æ–∫ (stdout –∏–ª–∏ StringIO)

–ò–º–µ–µ—Ç –º–µ—Ç–æ–¥ write()
–ù–æ –Ω–µ –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥–æ–≤ info(), error(), warning().
‚úî –õ–æ–≥–≥–µ—Ä

–ò–º–µ–µ—Ç –º–µ—Ç–æ–¥—ã
info(), warning(), error(), critical()
–ù–æ –Ω–µ –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥–∞ write().
